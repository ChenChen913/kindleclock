<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Kindle 时钟</title>
  <style>
    body {
      background-color: white;
      color: black;
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
    }
    #time {
      font-size: 120px;
      font-weight: bold;
      margin-bottom: 30px;
    }
    #dateWeek {
      font-size: 48px;
      margin-bottom: 20px;
    }
    #lunar {
      font-size: 36px;
      color: #333;
    }
  </style>
</head>
<body>
  <div id="time">--:--</div>
  <div id="dateWeek">加载中...</div>
  <div id="lunar">农历加载中...</div>

  <script>
    // 天干地支和生肖
    var Gan = ["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"];
    var Zhi = ["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"];
    var Animals = ["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"];
    var lunarMonthCN = ["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"];
    var lunarDayCN = ["初一","初二","初三","初四","初五","初六","初七","初八","初九","初十",
                      "十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
                      "廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"];

    // 补零函数，替代padStart()方法
    function padZero(num) {
      return (num < 10 ? '0' : '') + num;
    }

    // 获取农历日期（简化版）
    function getLunarDate(date) {
      // 使用静态数据作为示例，实际应用中应使用更准确的农历算法
      // 这里仅返回一个示例日期
      var year = date.getFullYear();
      var month = date.getMonth() + 1;
      var day = date.getDate();
      
      // 简单计算农历（仅作演示，不准确）
      var lunarDay = (day % 30) || 30;
      var lunarMonth = (month % 12) || 12;
      
      // 计算天干地支年份
      var ganIndex = (year - 4) % 10;
      var zhiIndex = (year - 4) % 12;
      var ganzhiYear = Gan[ganIndex] + Zhi[zhiIndex];
      var animal = Animals[zhiIndex];
      
      return {
        yearStr: ganzhiYear,
        animal: animal,
        monthStr: lunarMonthCN[lunarMonth - 1],
        dayStr: lunarDayCN[lunarDay - 1]
      };
    }

    function updateClock() {
      var now = new Date();
      var h = padZero(now.getHours());
      var m = padZero(now.getMinutes());
      document.getElementById("time").textContent = h + ":" + m;

      var weekdays = ["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];
      var dateStr = now.getFullYear() + "年" + 
                    (now.getMonth() + 1) + "月" + 
                    now.getDate() + "日 " + 
                    weekdays[now.getDay()];
      document.getElementById("dateWeek").textContent = dateStr;

      var lunar = getLunarDate(now);
      document.getElementById("lunar").textContent =
        lunar.yearStr + "[" + lunar.animal + "]年 农历 " + lunar.monthStr + lunar.dayStr;
    }

    // 初始更新
    updateClock();
    
    // 每分钟刷新一次
    setInterval(updateClock, 60000);
    
    // 添加点击刷新功能（针对Kindle的特殊需求）
    document.body.addEventListener('click', function() {
      updateClock();
    });
  </script>
</body>
</html>